<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeGem - Informations</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        h1 { color: #b22222; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>Informations du bijou</h1>
    <div id="data"></div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const id = params.get("id");

        const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSAnUjpPgVY7B_oLB_3tR-yEgPQVjTcACzYe8N1unh7R_f6j02xyFN4QaOCNNrOCEl82MnTx-6WEOUh/pub?output=csv";

        fetch(sheetURL)
            .then(response => response.text())
            .then(csv => {
                const rows = csv.split("\n").map(r => r.split(","));
                const headers = rows[0];
                const dataRow = rows.find(r => r[0] === id);

                if (dataRow) {
                    let html = "<table>";
                    headers.forEach((header, i) => {
                        html += `<tr><th>${header}</th><td>${dataRow[i]}</td></tr>`;
                    });
                    html += "</table>";
                    document.getElementById("data").innerHTML = html;
                } else {
                    document.getElementById("data").innerHTML = "<p style='color:red;'>ID non trouvé dans la base.</p>";
                }
            })
            .catch(err => {
                console.error(err);
                document.getElementById("data").innerHTML = "<p style='color:red;'>Erreur de chargement des données.</p>";
            });
    </script>
</body>
</html>
